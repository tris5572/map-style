# map-style

MapLibre GL JS で使用する地図スタイルを提供するリポジトリ。

> [!IMPORTANT]
> 🚧 作業中 🚧
> 
> まだ作成途上であり、完成していないため、アクティブに変更される。

## 使い方

MapLibre GL JS の `style` として、提供しているスタイルファイル(`JSON`)の URL を指定する。

## 提供しているスタイル

スタイルのサンプルは https://tris5572.github.io/map-style/ で確認可能。

### Light

明るい色のスタイル。

`https://tris5572.github.io/map-style/light/style.json` を指定する。

### Dark

暗い色のスタイル。

`https://tris5572.github.io/map-style/dark/style.json` を指定する。

## モチベーション

自分が使いたい地図スタイル（ダークモードなど）が見付からなかったため、自分で作成した。

POI で使用されるスプライトについても、自分好みのものを作成している。

## 備考メモ

### スプライト

SVG で作成したスプライトを PNG へ変換するスクリプトを内包している。

1. `/sprite-svg/` ディレクトリへ、テーマ名と同じ名前の SVG ファイル（例えば `dark.svg` を作成する）
   - SVG ファイルには、POI のスプライト内での配置情報として、`view` 要素に `id` と `viewBox` を指定する。
2. `pnpm sprite` を実行すると、スプライトの画像ファイル（PNG）と配置情報（JSON）が作成される。
   - ビルド時にはこのコマンドが実行されてファイルが配置されるため、ローカルでの確認時以外には実行不要。

### 開発中の挙動確認

開発中にローカルで挙動を確認する場合、以下のように行う。

- `pnpm dev` でローカル起動する。
  - ローカルの URL（基本的に http://localhost:5173/map-style となる）にブラウザでアクセスする。
- 地図スタイル（`style.json`）の変更は、ホットリロードで自動的に更新される。
- スプライトの SVG ファイル（`***.svg`）の変更時は、`pnpm sprite` を実行して PNG ファイル等を生成後、ページの再読み込みやスタイルの切り替えを行うことで更新される。
  - このときに作成された `.png` と `.json` は、コミット・プッシュする必要はない。ビルド時に自動的に実行・生成されるため。
